@inherits UmbracoViewPage

@{

    AdvancedPageComponents pageComponentsNode = Model.Children<AdvancedPageComponents>().FirstOrDefault();

    if (pageComponentsNode != null)
    {
        foreach (IPublishedContent component in pageComponentsNode.Children)
        {
            if (component != null)
            {
                TemplateStyleSettings settings = ViewTemplateHelper.GetTemplateStyleSettings(component.Value<string>("backgroundColor"), component.Value<string>("buttonColor"));

                string backgroundImageStyle = ViewTemplateHelper.GetBackgroundImageStyle(component.Value<IPublishedContent>("backgroundImage"), component.Value<BackgroundOption>("backgroundImageOptions"));

                string animateClass = String.Empty;

                if (component.Value<bool>("animate"))
                {
                    animateClass = "os-animation";
                }

                @Html.Partial("AdvancedPageComponents/ComponentsSwitch", component, new ViewDataDictionary { { "globalSettingsID", Model.GlobalSettings.Id }, { "backgroundImageStyle", backgroundImageStyle }, { "animateClass", animateClass }, { "backgroundStyle", settings.BackGroundStyle } })
            }
        }
    }
}
