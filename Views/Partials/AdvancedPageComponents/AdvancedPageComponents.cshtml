@inherits UmbracoViewPage
	
@using USNStarterKit.USNBackgroundOptions.Models
@using USN.USNTemplate;

@{

    UsnadvancedPageComponents pageComponentsNode = Model.Children<AdvancedPageComponents>().FirstOrDefault();

    if (pageComponentsNode != null)
    {
        foreach (IPublishedContent component in pageComponentsNode.Children)
        {
            if (component != null)
            {
                USNTemplateStyleSettings settings = USNViewTemplateHelper.GetTemplateStyleSettings(component.Value<string>("backgroundColor"), component.Value<string>("buttonColor"));

                string backgroundImageStyle = USNViewTemplateHelper.GetBackgroundImageStyle(component.Value<IPublishedContent>("backgroundImage"), component.Value<USNBackgroundOption>("backgroundImageOptions"));

                string animateClass = String.Empty;

                if (component.Value<bool>("animate"))
                {
                    animateClass = "os-animation";
                }

                @Html.Partial("USNAdvancedPageComponents/USN_ComponentsSwitch", component, new ViewDataDictionary { { "globalSettingsID", Model.GlobalSettings.Id }, { "backgroundImageStyle", backgroundImageStyle }, { "animateClass", animateClass }, { "backgroundStyle", settings.BackGroundStyle } })
            }
        }
    }
}
